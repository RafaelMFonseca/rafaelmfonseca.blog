<!doctype html><html class="not-ready lg:text-base" style=--bg:#faf8f1 lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Criando um website com Hugo no GitHub Pages e GitHub Actions. - Rafael Moreira Fonseca</title><meta name=theme-color><meta name=description content="Hoje decidi criar um blog, mais uma de minhas loucuras (quem diria?).
Eu resolvo diferentes problemas relacionados à programação no meu dia-a-dia, então decidi criar este blog para expor as dificuldades que tive para chegar em um resultado positivo para esses obstáculos.
Gostaria de mencionar que escrever nunca foi meu forte, eu passo o meu dia apenas digitando palavras-chaves (ou quem sabe um JSDoc?), mas vou tentar escrever os posts de uma maneira fácil para que todos entendam."><meta name=author content="Rafael Moreira Fonseca"><link rel="preload stylesheet" as=style href=https://rafaelmfonseca.github.io/main.min.css><script defer src=https://rafaelmfonseca.github.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://rafaelmfonseca.github.io/theme.png><link rel=icon href=https://rafaelmfonseca.github.io/favicon.ico><link rel=apple-touch-icon href=https://rafaelmfonseca.github.io/apple-touch-icon.png><meta name=generator content="Hugo 0.110.0"><meta property="og:title" content="Criando um website com Hugo no GitHub Pages e GitHub Actions."><meta property="og:description" content="Hoje decidi criar um blog, mais uma de minhas loucuras (quem diria?).
Eu resolvo diferentes problemas relacionados à programação no meu dia-a-dia, então decidi criar este blog para expor as dificuldades que tive para chegar em um resultado positivo para esses obstáculos.
Gostaria de mencionar que escrever nunca foi meu forte, eu passo o meu dia apenas digitando palavras-chaves (ou quem sabe um JSDoc?), mas vou tentar escrever os posts de uma maneira fácil para que todos entendam."><meta property="og:type" content="article"><meta property="og:url" content="https://rafaelmfonseca.github.io/posts/criando-website-hugo-github-pages-github-actions/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-20T21:30:50-03:00"><meta property="article:modified_time" content="2021-12-20T21:30:50-03:00"><meta itemprop=name content="Criando um website com Hugo no GitHub Pages e GitHub Actions."><meta itemprop=description content="Hoje decidi criar um blog, mais uma de minhas loucuras (quem diria?).
Eu resolvo diferentes problemas relacionados à programação no meu dia-a-dia, então decidi criar este blog para expor as dificuldades que tive para chegar em um resultado positivo para esses obstáculos.
Gostaria de mencionar que escrever nunca foi meu forte, eu passo o meu dia apenas digitando palavras-chaves (ou quem sabe um JSDoc?), mas vou tentar escrever os posts de uma maneira fácil para que todos entendam."><meta itemprop=datePublished content="2021-12-20T21:30:50-03:00"><meta itemprop=dateModified content="2021-12-20T21:30:50-03:00"><meta itemprop=wordCount content="534"><meta itemprop=keywords content="GithubPages,GitHubActions,GitHub,Hugo,Blog,Markdown,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Criando um website com Hugo no GitHub Pages e GitHub Actions."><meta name=twitter:description content="Hoje decidi criar um blog, mais uma de minhas loucuras (quem diria?).
Eu resolvo diferentes problemas relacionados à programação no meu dia-a-dia, então decidi criar este blog para expor as dificuldades que tive para chegar em um resultado positivo para esses obstáculos.
Gostaria de mencionar que escrever nunca foi meu forte, eu passo o meu dia apenas digitando palavras-chaves (ou quem sabe um JSDoc?), mas vou tentar escrever os posts de uma maneira fácil para que todos entendam."></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://rafaelmfonseca.github.io/>Rafael Moreira Fonseca</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#faf8f1".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=posts/>Posts</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-8 pb-16 pt-12 dark:prose-invert"><article><header class=mb-16><h1 class="!my-0 pb-2.5">Criando um website com Hugo no GitHub Pages e GitHub Actions.</h1><div class="text-sm antialiased opacity-60"><time>Dec 20, 2021</time>
<span class=mx-1>&#183;</span>
<span>Rafael Moreira Fonseca</span></div></header><section><p><br><br>Hoje decidi criar um blog, mais uma de minhas loucuras (quem diria?).</p><p>Eu resolvo diferentes problemas relacionados à programação no meu dia-a-dia, então decidi criar este blog para expor as dificuldades que tive para chegar em um resultado positivo para esses obstáculos.</p><p>Gostaria de mencionar que escrever nunca foi meu forte, eu passo o meu dia apenas digitando palavras-chaves (ou quem sabe um JSDoc?), mas vou tentar escrever os posts de uma maneira fácil para que todos entendam.</p><h2 id=enfim-vamos-ao-que-importa-como-criei-esse-blog>Enfim, vamos ao que importa, como criei esse blog?</h2><p>Aparentemente, no ambiente do <a href=https://go.dev/>Go Language</a> existe um framework muito famoso chamado <code>Hugo</code> (nome de gente? vou criar o <code>Rafael</code>), e ele é bastante utilizado para criação de websites estáticos.</p><h2 id=1-passo-instalar-o-golang-e-hugo-framework>1° Passo: Instalar o GoLang e Hugo Framework</h2><ul><li>Você pode baixar o GoLang direto do site: <a href=https://go.dev/>https://go.dev/</a></li><li>Instalar o <code>Hugo</code> é um pouco mais complicado porque seu executável precisa estar em uma pasta definida nas suas variáveis de ambiente, então simplesmente joguei na pasta do GoLang:</li></ul><p><img src=2021-12-21-00-55-59.png alt=Go></p><p>Verifique se está tudo ok:</p><p><img src=2021-12-21-00-58-57.png alt="Hyper Command Line"></p><h2 id=2-passo-criação-dos-repositórios>2° Passo: Criação dos repositórios</h2><p>Dividi o projeto em dois repositórios no GitHub: o back-end e o front-end.</p><p>Back-end: <code>RafaelMFonseca/rafaelmfonseca.blog</code></p><p>Front-end: <code>RafaelMFonseca/rafaelmfonseca.github.io</code></p><p>Antes de tudo iniciei o repositório do back-end com CLI do hugo:</p><pre tabindex=0><code>$ hugo new site rafaelmfonseca.blog
$ cd rafaelmfonseca.blog
$ git init
$ git submodule add https://github.com/nanxiaobei/hugo-paper themes/paper
$ hugo server
$ git submodule add -b main git@github.com:RafaelMFonseca/rafaelmfonseca.github.io public
</code></pre><p><img src=2021-12-21-01-16-13.png alt=RafaelMFonseca/rafaelmfonseca.blog></p><p>Observe que adicionei dois submódulos do git, o primeiro sendo o tema principal: <code>nanxiaobei/hugo-paper</code> (pasta themes), e segundo o módulo onde os arquivos compilados serão jogados: <code>RafaelMFonseca/rafaelmfonseca.github.io</code> (pasta public).</p><h2 id=3-passo-configuração-do-blog>3° Passo: Configuração do blog</h2><p>Abra o arquivo <code>config.toml</code> e altere as propriedades de acordo com o tema selecionado.
Veja o meu de exemplo:</p><pre tabindex=0><code>baseURL = &#39;https://rafaelmfonseca.github.io/&#39;
languageCode = &#39;en-us&#39;
title = &#39;Rafael Moreira Fonseca&#39;
theme = &#39;paper&#39;
</code></pre><h2 id=4-passo-breve-resumo-do-hugo-cli>4° Passo: Breve resumo do Hugo CLI</h2><p>Provavalmente você não vai utilizar os comandos abaixo se configurar para realizar build automática pelo GitHub Actions, mas só por curiosidade:</p><p>Para compilar o arquivos:</p><pre tabindex=0><code>$ hugo
</code></pre><p>Para iniciar o servidor de dev:</p><pre tabindex=0><code>$ hugo serve
</code></pre><h2 id=5-passo-build-automática-pelo-github-actions>5° Passo: Build automática pelo GitHub Actions</h2><p>Vamos utilizar o GitHub Pages justamente para hospedar uma aplicação compilada com o <code>Hugo</code> e o GitHub Actions para automatizar sua build.</p><p>O workflow vai ser mais ou menos isso:</p><p><b>Commit na branch <code>RafaelMFonseca/rafaelmfonseca.blog</code> => GitHub Actions => Branch <code>RafaelMFonseca/rafaelmfonseca.github.io</code> atualizada com os arquivos estáticos do blog</b></p><p>Crie em seu repositório do back-end o seguinte arquivo: <code>.github/workflows/main.yml</code> com o conteúdo:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>CI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Git checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>ssh-key</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SSH_PRIVATE_KEY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>persist-credentials</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Update theme</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>snickerbockers/submodules-init@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0.85.0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>personal_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>external_repository</span><span class=p>:</span><span class=w> </span><span class=l>&lt;nomeusuario&gt;/&lt;nomeusuario&gt;.github.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>keep_files</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>user_name</span><span class=p>:</span><span class=w> </span><span class=l>&lt;nomeusuario&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>user_email</span><span class=p>:</span><span class=w> </span><span class=l>&lt;emailvalido&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>force_orphan</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><h2 id=6-passo-configurações-de-token>6° Passo: Configurações de token</h2><p>Note que no YAML estamos utilizando duas variáveis: SSH_PRIVATE_KEY e TOKEN.</p><p>O TOKEN é gerado pelo link: <a href=https://github.com/settings/tokens/new>https://github.com/settings/tokens/new</a></p><p><img src=2021-12-21-01-20-45.png alt="Access token"></p><p>E para declarar essas variáveis adicionamos em: <a href=https://github.com/nomeusuario/seurepositorio/settings/secrets/actions>https://github.com/nomeusuario/seurepositorio/settings/secrets/actions</a></p><p><img src=2021-12-21-01-22-17.png alt="Actions secret"></p><p>O SSH_PRIVATE_KEY é sua chave SSH gerada para o GitHub.</p><p>Com isso qualquer commit vai disparar o GitHub Actions e publicar seu blog no repositório de front-end.</p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/githubpages>GithubPages</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/githubactions>GitHubActions</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/github>GitHub</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/hugo>Hugo</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/blog>Blog</a>
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://rafaelmfonseca.github.io/tags/markdown>Markdown</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://rafaelmfonseca.github.io/posts/deploying-on-premises-machines-azure-devops/><span class=mr-1.5>←</span><span>Azure DevOps: Guia passo a passo para configurar um Agent Self-Hosted no Windows</span></a></nav><div class=mt-24 id=disqus_thread></div><script>const disqusShortname="rafaelmfonseca",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://rafaelmfonseca.github.io/>Rafael Moreira Fonseca</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>✎ Paper</a></footer></body></html>